
# 创建集群

## 确认地域及实例配置
**确定实例所在地域**

京东云不同地域之间完全隔离，保证不同地域间最大程度的稳定性和容错性。当前覆盖国内华北-北京、华南-广州、华东-宿迁及华东-上海四地域。目前Kubernetes集群在华北-北京、华南-广州、华东-上海开通，未来我们将逐步增加更多服务地域以满足您业务需求。

选择地域时建议考虑以下几点：

 - 集群与其他京东云产品间的部署关系。 
 - 不同地域之间的云产品默认不能通过内网通信。
 集群默认不可跨地域内网互访，默认不可跨地域访问云数据库及云缓存等
   云主机实例绑定公网IP、安全组时仅支持绑定同地域下的公网IP、安全组；云主机实例绑定云硬盘时仅支持绑定同可用区下的云硬盘      
 - 上述内网互通是均指同一账户下的资源互通，不同账户的资源内网完全隔离。

**选择云主机实例配置**

正式部署业务前建议您使用按配置计费实例来进行性能测试，找到与您业务量匹配的实例规格及其他资源配置。只支持第二代实例规格，可参考[实例规格类型](https://docs.jdcloud.com/cn/virtual-machines/instance-type-family)。

## 创建集群

 1.打开控制台，选择[弹性计算>>Kubernetes集群>>集群服务>>集群](https://cns-console.jdcloud.com/host/kubernetes/list)   
 2.选择创建地域，点击“创建”按钮，建议您根据业务情况选择集群所在地域及可用区；默认选中指定地域下的所有可用区，建议按照默认模式；也可取消选中某个可用区，需要保证至少有一个可用区被选中。  
 3.设置名称、描述：名称不可为空，只支持中文、数字、大小写字母、英文下划线 “ _ ”及中划线 “ - ”，且不能超过32字符；描述为非必填项，长度不超过256字符。   
 4.集群版本：目前只支持1.8.12版本。    
 5.管理节点CIDR：与其他私有网络的CIDR不可重叠，CIDR掩码取值范围为24 ~ 27。CIDR的设置规则参考私有网络CIDR的规则。  
 6.客户端证书、基础鉴权：默认全部开启，建议全部保留；需要至少保留一个为开启状态；客户端证书：基于base64编码的证书，用于客户端到集群服务端点的认证；基础鉴权：开启后允许客户端使用用户名、密码在集群服务端点认证。  
 7.添加Accesskey：选择启动状态下的Accesskey；如果无可用Access Key，请前往Access Key管理页面创建新的Access Key，并在开启状态。可参考Accesskey管理。  
新建工作节点组：  
8.私有网络：选择创建的私有网络。可参考私有网络VPC配置。  
9.工作节点CIDR：设置规则参考私有网络下子网CIDR的规则，CIDR掩码取值范围为16~24。    
10.镜像：仅支持京东云定制镜像。  
11.规格：根据具体业务情况选择不同云主机规格类型，支持云主机第二代规格。可参考实例规格类型。  
12.数量：默认数量为3，可根据需求，可以点击增加、减少按键或者输入数量，最大数量为Node CIDR中可创建的主机数量、云主机配额中的最小值。  
13.名称：默认名称为nodegroup1，名称不可为空，只支持中文、数字、大小写字母、英文下划线“_”及中划线“-”，且不能超过32字符。同一集群下的工作节点组不可重名。  
14.以下为高级选项，非必填项  
描述：描述不能超过256个字符  
系统盘：本地盘，容量默认为100G，不可修改。  
标签：设置添加到工作节点上的标签；键由前缀和名称组成；前缀不超过253字符，名称和值不超过63字符；前缀由DNS子域名组成，键值必须以字母数字起始，支持“-”“ _ ”“.”、大写字母，小写字母和数字；最多可添加5组标签。  
15.完成相关设置后，点击确定，即可进入弹性计算>>Kubernetes集群>>集群服务>>集群，查看创建的Kubernetes集群，创建过程一般需要几分钟，还请耐心等待。
