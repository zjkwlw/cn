# 计费规则

数据计算服务目前支持一种计费类型：
 * 按量计费

## 存储计费

用户每个月在数据计算服务上将享受前500GB数据免费存储的服务。超出部分的数据表等数据，会按照其数据容量的大小进行计费，计费周期是：小时。
具体计费公式为：每小时存储费用 = 存储容量 * 存储价格，价格如下：

|计费类型|价格|说明|辅助举例|
--|--|--|--|
张三 | 0GB~100GB：0.0192元/GB/天 </br>
100GB~1TB：0.0096元/GB/天(5折)<br>
1TB~10TB：0.0084元/GB/天(4.375折)<br>
10TB~100TB：0.0072元/GB/天(3.75折)<br>
100TB~1PB：0.006元/GB/天(3.125折)<br>
1PB以上：请通过工单联系我们 | 1 | 2 |

说明：
账单出账周期通常为每小时一次。例如00:00-01:00的账单一般会在01:00生成。
具体以系统出账时间为准，账单生成后会自动从您的账户余额中扣除费用以结算账单。

举例：
用户于00:00在数据计算服务上上传成功了1000GB的数据，将于01:00进行存储计费，账单金额为1000GB*1H*0.0008元/GB/H=8元。
如对数据进行删除，将按照具体存储的时间按小时精准计费，详细账单可在用户中心进行查看。


## 计算计费

### 共享计算资源

   如果选择使用共享计算资源，每一个查询任务的计费方法是通过计算实际处理数据大小，SQL复杂度两个指标进行计费。具体计费公式为：SQL计算费用=计算实际处理数据大小*SQL复杂度*SQL单价

| 计费项 | 价格 | 
| ------ | ------ | 
| SQL价格（元/GB） | 0.3元 | 

说明：
计算实际处理数据大小，指一个SQL查询任务实际扫描的数据量。
(注：大部分SQL语句都会进行分区过滤和列筛选，所以一般情况下这个值会远小于原本数据大小)
分区过滤：例如：SQL语句中含有where userid<"200000"，userid是分区列，则计费的数据量只会包括实际读取的分区，不会包括其他分区的数据。
列筛选：例如：用户提交的SQL语句为select name from class; 只计算class表中name这一列的数据量，其他列不会参与计费。
SQL = Join + Group By + Order By + Distinct + window函数 + max(insert into-1, 1)
SQL复杂度计算：
      SQL 关键字个数<= 3，复杂度为 1。
      SQL 关键字个数<= 6，且>= 4，复杂度为 1.5。
      SQL 关键字个数<= 19，且>= 7，复杂度为 2。
      SQL 关键字个数>= 20，复杂度为 4。
示例：
用户输入的SQL语句是：
SELECT DISTINCT total1 FROM
(SELECT id1, COUNT(f1) AS total1 FROM in1 GROUP BYid1) tmp1 ORDER BY total1 DESC LIMIT 100;
其中，SQL关键字个数是4，而SQL复杂度是1.5，若用户实际扫描数据为100GB，则所需费用=100*1.5*0.3=45元。
账单出账时间在计算任务结束后的首个出账周期内，最长不超过12个小时。
在计算任务成功结束后，系统会统计该计算任务读取的数据量和SQL复杂度，账单生成后会自动从您的账户余额中扣除费用以结算账单。没有成功的计算任务，业务错误，正常收费；资源级错误，不收费。

